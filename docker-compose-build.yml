version: "2"

services:

    zookeeper:
        extends:
            file: zookeeper.yml
            service: zookeeper

    hadoop:
        extends:
            file: hadoop.yml
            service: hadoop
        links:
            - zookeeper

    hbase:
        build:
            context: .
            dockerfile: Dockerfile
        image: mcapitanio/hbase:latest
        networks:
            - hadoop
        volumes:
            - hbase_logs:/opt/hbase/logs
            - hbase_conf:/opt/hbase/conf
        volumes_from:
            - hadoop
        links:
            - hadoop
            - zookeeper
        ports:
            - "60010:60010"
            - "60030:60030"

volumes:
    hadoop_conf:
    hadoop_hdfs:
    hadoop_logs:
    hbase_conf:
    hbase_logs:
    zookeeper_conf:
    zookeeper_logs:
    zookeeper_data:

networks:
    hadoop:
        driver: bridge
